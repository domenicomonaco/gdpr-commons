{"version":3,"sources":["gdpr.commons.js"],"names":["eraseCookie","name","cookieValue","setCookie","config","text","cookieName","document","cookie","value","days","JSON","stringify","expires","date","Date","setTime","getTime","toUTCString","getCookie","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","out","parse","cookieDaysExp","linkPrivacyPolicy","textTitleModal","textAbstractModal","textButtonAccept","textButtonOpenPolicy","textAccepted","textNotAccepted","textNotPresent","textButtonResetCookie","textCredits","textVersion","textLicense","window","onload","GDPRCOMMONS","getElementById","dataurlpolicy","getAttribute","linkprivacy","innerHTML","accepted","showViews","classList","remove","add","addEventListener","toLocaleDateString","setTimeout","eraser","getElementsByClassName","console","warn"],"mappings":"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","file":"gdpr.commons.js","sourceRoot":"..\\src","sourcesContent":["/** AUTHOR: Tecnologie per Persone di Domenico Monaco - LICENSE: MIT - LINK: https://www.gdprcommons.it */\n\nfunction eraseCookie(name) {\n    cookieValue = null;\n    setCookie(config.text.cookieName, cookieValue, null);\n    document.cookie = name + '=; Max-Age=-99999999;';\n}\n\nfunction setCookie(name, value, days) {\n    value = JSON.stringify(value);\n    var expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/\";\n}\n\nfunction getCookie(name) {\n    let nameEQ = name + \"=\";\n    let ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n        if (c.indexOf(nameEQ) == 0) {\n            let out = c.substring(nameEQ.length, c.length);\n            return JSON.parse(out);\n        }\n    }\n    return null;\n}\n\nconst config = {\n    text: {\n        cookieDaysExp: 20,\n        cookieName: 'GDPRCommons-cookie',\n        linkPrivacyPolicy: \"http://www.gdprcommons.it\",\n        textTitleModal: \"Informativa Cookie\",\n        textAbstractModal: \"Questo sito utilizza esclusivamente cookie e/o altri strumenti di tracciamento di tipo tecnico o analitici al solo scopo di analisi statistica del traffico senza risalire all'identitÃ  del singolo utente. In oltre, non raccoglie informazioni personali in modo automatico senza esplicito consenso. In alcuni casi sono utilizzate risorse esterne. A scopo informativo, ai fini legislativi, si chiede la consultazione della Privacy Policy e proseguire cliccando su \\'Ho capito\\'\",\n        textButtonAccept: \"Ho capito\",\n        textButtonOpenPolicy: \"Leggi l\\'informativa\",\n        textAccepted: \"Accettato\",\n        textNotAccepted: \"Non accettato\",\n        textNotPresent: \"Nessun dato\",\n        textButtonResetCookie: \"Resetta preferenze\",\n        textCredits: \"GDPRCommons.it\",\n        textVersion: \"v0.1.0\",\n        textLicense: \"MIT\"\n\n    }\n};\n\nwindow.onload = function () {\n\n    const GDPRCOMMONS = document.getElementById(\"GDPR_Commons\");\n    const dataurlpolicy = GDPRCOMMONS.getAttribute('data-urlpolicy');\n    const linkprivacy = (dataurlpolicy == null) ? config.text.linkPrivacyPolicy : dataurlpolicy + '?source=www.gdprcommons.it';\n\n\n    GDPRCOMMONS.innerHTML = `\n  <div id=\"gdpr-commons-fixedicon\">\n    <a href=\"#GDPRCommons-dialog\" id=\"gdpr-commons-button-fixedicon\" class=\"fixedicon\" aria-label=\"Open Cookie Notice\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"bi bi-shield-lock-fill\" viewBox=\"0 0 16 16\">\n        <path fill-rule=\"evenodd\" d=\"M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.467 62.467 0 0 0-2.887-.87C9.843.266 8.69 0 8 0zm0 5a1.5 1.5 0 0 1 .5 2.915l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99A1.5 1.5 0 0 1 8 5z\"/>\n      </svg>\n    </a>\n  </div><div id=\"gdpr-commons-modal-overlay\"></div>\n  <div id=\"gdpr-commons-modal\">\n    <div class=\"gdpr-commons-modal-header\">\n      <div class=\"gdpr-commons-modal-title\">\n        <h3>${config.text.textTitleModal}</h3>\n      </div>\n    </div>\n    <div class=\"gdpr-commons-modal-content\">\n      <p>\n        ${config.text.textAbstractModal}\n      </p>\n    </div>\n\n    <div class=\"gdpr-commons-modal-middle\">\n      <div>\n        <span id=\"last-consent-state\"></span> <em><span id=\"last-consent-date\"></span></em>\n      </div>\n      <a href=\"${linkprivacy}\">${config.text.textButtonOpenPolicy}</a>\n    </div>\n\n      <div class=\"gdpr-commons-modal-footer\">\n        <button id=\"gdpr-commons-button-accept\" class=\"buttons\">${config.text.textButtonAccept}</button>\n    </div>\n    <div id=\"gdpr-commons-modal-credits\">\n        <span><a title=\"${config.text.textCredits}\" target=\"_blank\" href=\"https://www.gdprcommons.it\">\n        ${config.text.textCredits}</a> ${config.text.textLicense}\n    </div>\n  </div>\n\n  </div>`;\n\n    let cookieValue = {\n        date: null,\n        accepted: false,\n    };\n\n    let cookie = getCookie(config.text.cookieName);\n\n    function hideViews() {\n        document.getElementById(\"gdpr-commons-modal-overlay\").classList.add('fadeOUT-display');\n        document.getElementById(\"gdpr-commons-modal\").classList.add('fadeOUT-display');\n        document.getElementById(\"gdpr-commons-modal-overlay\").classList.remove('fadeIN-display');\n        document.getElementById(\"gdpr-commons-modal\").classList.remove('fadeIN-display');\n    }\n\n    function showViews() {\n        document.getElementById(\"gdpr-commons-modal-overlay\").classList.remove('fadeOUT-display');\n        document.getElementById(\"gdpr-commons-modal\").classList.remove('fadeOUT-display');\n        document.getElementById(\"gdpr-commons-modal-overlay\").classList.add('fadeIN-display');\n        document.getElementById(\"gdpr-commons-modal\").classList.add('fadeIN-display');\n    }\n\n    document.getElementById(\"gdpr-commons-button-accept\").addEventListener('click', function () {\n\n        cookieValue = {\n            date: Date(),\n            accepted: true,\n        };\n\n        setCookie(config.text.cookieName, cookieValue, config.text.cookieDaysExp);\n        document.getElementById(\"last-consent-state\").innerHTML = config.text.textAccepted;\n        document.getElementById(\"last-consent-date\").innerHTML = new Date(cookieValue.date).toLocaleDateString();\n\n       setTimeout(hideViews(),1500);\n    });\n\n    /*document.getElementById(\"gdpr-commons-button-reset\").addEventListener('click', function () {\n\n        cookieValue = {\n            date: Date(),\n            accepted: false,\n        };\n\n        setCookie(config.text.cookieName, cookieValue, config.text.cookieDaysExp);\n        location.reload();\n    });*/\n\n    document.getElementById(\"gdpr-commons-button-fixedicon\").addEventListener('click',\n        function () {\n            showViews();\n        });\n\n    var eraser = document.getElementsByClassName('eraseCookieGDPR');\n    for (var i = 0; i < eraser.length; i++) {\n        eraser[i].addEventListener('click', function () {\n            console.warn(config.text.cookieName, 'erased');\n            eraseCookie(config.text.cookieName);\n        });\n    }\n\n    setTimeout(function () {\n        if (cookie == null) {\n            showViews();\n        } else {\n            if (cookie.date != null) {\n                document.getElementById(\"last-consent-date\").innerHTML = new Date(cookie.date).toLocaleDateString();\n            } else {\n                document.getElementById(\"last-consent-date\").innerHTML = '0:00:00'\n            }\n\n            if (cookie.accepted != null && cookie.accepted == true) {\n                document.getElementById(\"last-consent-state\").innerHTML = config.text.textAccepted;\n            } else {\n                document.getElementById(\"last-consent-state\").innerHTML = config.text.textNotAccepted;\n                showViews();\n            }\n        }\n    }, 150);\n};\n"]}